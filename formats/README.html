<h1 id="lehdpublicusedataschemas">LEHD Public Use Data Schemas</h1>

<h2 id="scope">Scope</h2>

<p>The public-use data from the Longitudinal Employer-Household Dynamics Program, including the Quarterly Workforce Indicators (QWI) and Job-to-Job Flows (J2J), are available for download according to structural and file naming schema. The data themselves are available as Comma-Separated Value (CSV) files through the LEHD websiteâ€™s Data page at http://lehd.ces.census.gov/data/ as well as through the <a href="http://ledextract.ces.census.gov/">LED Extraction Tool</a>.</p>

<p>For each variable, a set of allowable values is defined. Definitions of allowable values are provided as CSV files, with header variable definitions. The naming conventions of the data files is documented separately, in a similar fashion.</p>

<h2 id="history">History</h2>

<p>The first published schema for the Quarterly Workforce Indicators (QWI) was <a href="v3.5">v3.5</a>, used for QWI files releases through R2013Q1. No formal document describing the schema was released, but a user-contributed &#8220;<a href="v3.5/QWI-cheatsheet.txt">Cheatsheet</a>&#8221; was available. A restructuring of the data and file naming conventions lead to <a href="V4.0">V4.0</a> for releases starting with R2013Q2. The newer schema was described in the form of a <a href="V4.0/QWIPU_Data_Schema.pdf">PDF document</a> that was occassionally updated to reflect corrections and enhancements. All data releases were accompanied by a set of CSV files for allowable values of variables and flags, accompanying each collection of tabulations for each state.</p>

<p>Starting with release R2015Q2, a more formal and flexible structure was implemented, and published as <a href="V4.0.1">V4.0.1</a>. As changes occur to elements of the schema, version numbers are incremented (see <a href="#Versioning">Versioning</a>). Broader changes are first published as draft schemas (typically used by draft or &#8220;beta&#8221; releases of data), before becoming finalized. All versions are retained on this server.</p>

<h2 id="usage">Usage</h2>

<p>Each data release is accompanied by a file specifying a compact notation for metadata. For instance, the R2014Q4 release of Missouri QWI by race and ethnicity for all firm types (archived <a href="http://download.vrdc.cornell.edu/qwipu/R2014Q4/mo/rh/f/">here</a> or <a href="http://lehd.ces.census.gov/pub/mo/R2014Q4/DVD-rh_f/">here</a>) would have a file called &#8216;version_rh_f.txt&#8217; with the following content:
<pre>
QWIRH_F MO 29 1995:1&#8211;2014:1 V4.0 R2014Q4 qwipu_mo_20141116_1406
</pre>
where the fifth component (<code>V4.0</code>) identifies the schema being used. Thus, all value labels, the naming and structure of the files, the geographic and industry coding vintages, etc. can be deduced from the information available in the <a href="V4.0">V4.0</a> directory.</p>

<h2 id="versioning">Versioning</h2>

<p>Versioning rules follow <a href="http://semver.org/spec/v2.0.0.html">Semantic Versioning V2.0.0</a>, which states that</p>

<blockquote>
<p>Given a version number MAJOR.MINOR.PATCH, increment the:</p>

<ul>
<li>MAJOR version when you make incompatible API changes,</li>
<li>MINOR version when you add functionality in a backwards-compatible manner, and</li>
<li>PATCH version when you make backwards-compatible bug fixes.</li>
</ul>
</blockquote>

<p>In practice,</p>

<ul>
<li>LEHD increments the major number when a new data format is used that would drop import by outside systems (variables are dropped, are in a different order, existing variables change names; file naming conventions change for existing files)</li>
<li>LEHD increments the minor number when</li>
<li>variables are added, without changing order of existing variables</li>
<li>new types of data are added (e.g., J2J, LODES) without changing existing files</li>
<li>changes in values are of a &#8220;significant&#8221; nature</li>
<li>changes to the structure of the schema documentation are made</li>
<li>LEHD increments the &#8220;patch&#8221; number when changes are made to existing codes that do not break import of data, or change the interpretation of the data in a significant way</li>
<li>a description is corrected</li>
<li>a set of value labels is changed in a minimal way</li>
<li>LEHD does not increment the version number when corrections to the human readable schema documentation itself are made, but does indicate such changes in the CHANGE section and by dating the resulting files.</li>
</ul>

<p>Examples of &#8220;patch&#8221;-level changes are:
* updated geography definitions (changes in state-specific geographies impacting a small set of areas, for instance a WIB or a small number of counties) (see CHANGES in <a href="V4.0.1/CHANGES.txt">V4.0.1</a>, <a href="V4.0.2/CHANGES.txt">V4.0.2</a>, <a href="V4.0.3/CHANGES.txt">V4.0.3</a> for examples)
* change in NAICS coding affecting only a small number of industries (see CHANGES in <a href="V4.0.2/CHANGES.txt">V4.0.2</a> for an example). Switching from SIC to NAICS would have been a &#8216;major&#8217; version number change, changing from NAICS 1997 to 2007 - which had more significant changes, but did not fundamentally change the way the data are read in - would have been a &#8216;minor&#8217; version number change.</p>

<p>Additional revisions within a &#8220;patch&#8221;-level schema will be identified in the CHANGES.txt by date, but will not otherwise carry a differernt version number. Revisions are only used to correct for bugs, and to improve documentation of the schema itself, but not to change the schema.</p>

<h2 id="draftversions">Draft Versions</h2>

<p>LEHD will publish a draft version of minor or major schema changes, in order to be able to allow for comments by the community. A draft schema may also accompany &#8216;beta&#8217; data products, where both schema and data are published to elicit comments from the public. Draft versions do not necessarily lead to a final specification, and should be treated as work in progress.</p>

<h2 id="curation">Curation</h2>

<p>LEHD commits to keeping a public record of all major, minor, and patch versions of the schema in an accessible, public location (currently, at http://lehd.ces.census.gov/data/schema/). Additional revisions are stored internally in code versioning systems, and can be provided upon request.</p>

<h2 id="mostcurrentversion">Most Current Version</h2>

<p>For convenience, the most current non-draft version is accessible at http://lehd.ces.census.gov/data/schema/current/. However, users should note that at any point in time, data published by LEHD may reference an older schema, as noted in the Usage section above. Users are strongly encouraged to reference a well-specified revision number in their programs, derived from the &#8220;version*txt&#8221; file provided with each data release.</p>

<h2 id="changes">Changes</h2>

<p>This section is reserved for documentation of changes to the versioning schema itself, as well as for description of major version changes related to the schema documentation.</p>

<ul>
<li><a href="v3.5">v3.5</a> First documented schema</li>
<li><a href="V4.0">V4.0</a> Second documented schema, change in file naming conventions; added and dropped variables.</li>
<li><a href="V4.0.1">V4.0.1</a> First formally structured schema documentation of V4 schema.</li>
<li>V4.1 Additional files and variables (not finalized yet)</li>
</ul>
